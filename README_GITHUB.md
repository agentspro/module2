# RAG Demos - –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è 6 –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ Retrieval-Augmented Generation

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –º—ñ—Å—Ç–∏—Ç—å —Ä–æ–±–æ—á—ñ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è 6 —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ RAG —Å–∏—Å—Ç–µ–º.

## –©–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó

### üìä –ì–æ—Ç–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–í—Å—ñ —Ç–µ—Å—Ç–∏ –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω—ñ –Ω–∞ **—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–º—É –¥–∞—Ç–∞—Å–µ—Ç—ñ –∑ 50 –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤**:

- `results/naive_rag_results.json` - Naive RAG (–±–∞–∑–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥)
- `results/advanced_rag_results.json` - Advanced RAG (–Ω–∞–π–∫—Ä–∞—â–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å 71.4%)
- `results/bm25_rag_results.json` - BM25 RAG (–Ω–∞–π—à–≤–∏–¥—à–∏–π 3.8—Å)
- `results/faiss_rag_results.json` - FAISS RAG (–æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å)
- `results/hybrid_rag_results.json` - Hybrid RAG (BM25 + –≤–µ–∫—Ç–æ—Ä–Ω–∏–π)
- `results/corrective_rag_results.json` - Corrective RAG (—Å–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)
- **`results/final_comparison_report.txt`** - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏

### üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó (–≥–æ—Ç–æ–≤—ñ –¥–æ –∑–∞–ø—É—Å–∫—É)

```
rag_demos/
‚îú‚îÄ‚îÄ naive_rag/naive_rag_demo.py          # –ë–∞–∑–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥
‚îú‚îÄ‚îÄ advanced_rag/advanced_rag_demo.py    # –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π (rewriting + reranking)
‚îú‚îÄ‚îÄ bm25_rag/bm25_rag_demo.py           # Keyword-based –ø–æ—à—É–∫
‚îú‚îÄ‚îÄ faiss_rag/faiss_rag_demo.py         # –í–µ–∫—Ç–æ—Ä–Ω–∏–π —ñ–Ω–¥–µ–∫—Å Facebook FAISS
‚îú‚îÄ‚îÄ hybrid_rag/hybrid_rag_demo.py       # –ì—ñ–±—Ä–∏–¥–Ω–∏–π (BM25 + –≤–µ–∫—Ç–æ—Ä–Ω–∏–π)
‚îî‚îÄ‚îÄ corrective_rag/corrective_rag_demo.py # –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
```

### üìù –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –¥–∞—Ç–∞—Å–µ—Ç

`data/test_queries_unified.json` - 100 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:
- 8 –∫–∞—Ç–µ–≥–æ—Ä—ñ–π (definition, technical, approaches, evaluation, etc.)
- 3 —Ä—ñ–≤–Ω—ñ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ (easy, medium, hard)
- –ú–µ—Ç–∞–¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É

### üõ† –£—Ç–∏–ª—ñ—Ç–∏

- `utils/data_loader.py` - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –¥–∞—Ç–∞—Å–µ—Ç—É
- `compare_all_rag_approaches.py` - –°–∫—Ä–∏–ø—Ç –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π)
- `run_all_tests.sh` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
- `check_progress.sh` - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install numpy scikit-learn requests pymupdf
```

–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è FAISS RAG):
```bash
pip install faiss-cpu  # –∞–±–æ faiss-gpu –¥–ª—è GPU
```

### 2. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

–ü–æ–º—ñ—Å—Ç—ñ—Ç—å –≤–∞—à—ñ PDF —Ñ–∞–π–ª–∏ –≤ `data/pdfs/`

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞ (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)

```bash
export OPENAI_API_KEY="your-api-key-here"
```

### 4. –ó–∞–ø—É—Å–∫ –æ–∫—Ä–µ–º–æ—ó –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó

```bash
# Naive RAG (–±–∞–∑–æ–≤–∏–π)
python naive_rag/naive_rag_demo.py

# Advanced RAG (–Ω–∞–π–∫—Ä–∞—â–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å)
python advanced_rag/advanced_rag_demo.py

# FAISS RAG (–æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å)
python faiss_rag/faiss_rag_demo.py
```

### 5. –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å API –∫–ª—é—á
export OPENAI_API_KEY="your-key"

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤—Å—ñ —Ç–µ—Å—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
./run_all_tests.sh

# –ê–±–æ –≤ —Ñ–æ–Ω—ñ
./run_all_tests.sh > /tmp/all_tests.log 2>&1 &

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—É
./check_progress.sh
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ (50 –∑–∞–ø–∏—Ç—ñ–≤):

| –ü—ñ–¥—Ö—ñ–¥ | –¢–æ—á–Ω—ñ—Å—Ç—å | –®–≤–∏–¥–∫—ñ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è |
|--------|----------|-----------|--------------|
| **Advanced RAG** | **71.4%** (+251% vs Naive) | 7.39—Å | –ü—Ä–æ–¥–∞–∫—à–µ–Ω (–Ω–∞–π–∫—Ä–∞—â–∞ —è–∫—ñ—Å—Ç—å) |
| **FAISS RAG** | **66.6%** | **3.88—Å** | –û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å |
| **BM25 RAG** | N/A | **3.80—Å** | –ù–∞–π—à–≤–∏–¥—à–∏–π |
| Hybrid RAG | 56.1% | 5.57—Å | –°—Ç–∞–±—ñ–ª—å–Ω–∏–π |
| Corrective RAG | 21.6% (86% –≤–µ–±) | 4.35—Å | –°–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ |
| Naive RAG | 20.3% (baseline) | 5.28—Å | –ë–∞–∑–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å |

### –ö–ª—é—á–æ–≤—ñ –≤–∏—Å–Ω–æ–≤–∫–∏:

1. **Advanced RAG** - –ª—ñ–¥–µ—Ä –∑–∞ —Ç–æ—á–Ω—ñ—Å—Ç—é (+251% vs Naive)
2. **FAISS RAG** - –Ω–∞–π–∫—Ä–∞—â–∏–π –±–∞–ª–∞–Ω—Å —à–≤–∏–¥–∫—ñ—Å—Ç—å/—è–∫—ñ—Å—Ç—å
3. **BM25 RAG** - –Ω–∞–π—à–≤–∏–¥—à–∏–π (keyword-based, –±–µ–∑ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)
4. **Corrective RAG** - 86% –∑–∞–ø–∏—Ç—ñ–≤ –ø–æ—Ç—Ä–µ–±—É–≤–∞–ª–∏ –≤–µ–± –ø–æ—à—É–∫—É (–ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
rag_demos/
‚îú‚îÄ‚îÄ naive_rag/               # –ë–∞–∑–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥
‚îÇ   ‚îú‚îÄ‚îÄ naive_rag_demo.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ advanced_rag/            # –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥
‚îÇ   ‚îú‚îÄ‚îÄ advanced_rag_demo.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ bm25_rag/               # BM25 keyword –ø–æ—à—É–∫
‚îú‚îÄ‚îÄ faiss_rag/              # FAISS –≤–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫
‚îú‚îÄ‚îÄ hybrid_rag/             # –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥
‚îú‚îÄ‚îÄ corrective_rag/         # –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
‚îú‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ data/                   # –î–∞–Ω—ñ
‚îÇ   ‚îú‚îÄ‚îÄ pdfs/              # PDF –¥–æ–∫—É–º–µ–Ω—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_queries_unified.json  # –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –¥–∞—Ç–∞—Å–µ—Ç
‚îú‚îÄ‚îÄ results/               # –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ *_results.json
‚îÇ   ‚îî‚îÄ‚îÄ final_comparison_report.txt
‚îú‚îÄ‚îÄ run_all_tests.sh       # –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
‚îú‚îÄ‚îÄ check_progress.sh      # –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—É
‚îî‚îÄ‚îÄ compare_all_rag_approaches.py  # –°–∫—Ä–∏–ø—Ç –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç—É

```python
from utils.data_loader import DocumentLoader

loader = DocumentLoader()

# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç—É
queries = loader.load_unified_queries(
    max_queries=50,  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤
    categories=["definition", "technical"]  # –§—ñ–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö (–æ–ø—Ü—ñ–π–Ω–æ)
)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Ç—É
# {
#   "id": 1,
#   "category": "definition",
#   "question": "What is RAG?",
#   "difficulty": "easy",
#   "expected_concepts": ["retrieval", "generation", "LLM"]
# }
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É (–≤–∏—Å–æ–∫–∞ —è–∫—ñ—Å—Ç—å)
‚Üí **Advanced RAG**
- –¢–æ—á–Ω—ñ—Å—Ç—å: 71.4%
- Query rewriting + hybrid search + reranking
- –ß–∞—Å: 7.39—Å (–ø—Ä–∏–π–Ω—è—Ç–Ω–æ)

### –î–ª—è real-time –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ (—à–≤–∏–¥–∫—ñ—Å—Ç—å)
‚Üí **BM25 RAG** –∞–±–æ **FAISS RAG**
- BM25: 3.80—Å (–Ω–∞–π—à–≤–∏–¥—à–∏–π)
- FAISS: 3.88—Å + 66.6% —Ç–æ—á–Ω—ñ—Å—Ç—å
- –î–ª—è low-latency API (<5 —Å–µ–∫—É–Ω–¥)

### –û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å
‚Üí **FAISS RAG**
- –ù–∞ 47% —à–≤–∏–¥—à–µ –∑–∞ Advanced
- –õ–∏—à–µ –Ω–∞ 10% –Ω–∏–∂—á–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å
- –ù–∞–π–∫—Ä–∞—â–µ —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Ü—ñ–Ω–∞/—è–∫—ñ—Å—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω—ñ —Å–∏—Å—Ç–µ–º–∏
‚Üí **Corrective RAG**
- –°–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—ñ (3 —ñ—Ç–µ—Ä–∞—Ü—ñ—ó)
- –í–µ–± fallback –ø—Ä–∏ –Ω–∏–∑—å–∫—ñ–π —è–∫–æ—Å—Ç—ñ
- –î–ª—è —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤, –º–µ–¥–∏—Ü–∏–Ω–∏, —é—Ä–∏–¥–∏—á–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- **Chunk size**: 500-1000 —Å–∏–º–≤–æ–ª—ñ–≤
- **Chunk overlap**: 100-200 —Å–∏–º–≤–æ–ª—ñ–≤
- **Top-k**: 3-5 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- **LLM**: OpenAI gpt-4o-mini (fallback: Ollama)
- **Embedding**: TF-IDF (baseline) + FAISS (–≤–µ–∫—Ç–æ—Ä–Ω–∏–π)
- **–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: ~25 —Ö–≤–∏–ª–∏–Ω (300 –∑–∞–ø–∏—Ç—ñ–≤)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- `UNIFIED_DATASET_README.md` - –û–ø–∏—Å —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç—É
- `QUICK_START_UNIFIED.md` - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤
- `results/final_comparison_report.txt` - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ù–∞–≤—á–∞–ª—å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª. –í—ñ–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –æ—Å–≤—ñ—Ç–Ω—ñ—Ö —Ü—ñ–ª—è—Ö.

## –ê–≤—Ç–æ—Ä–∏

–û–ª–µ–∫—Å–∞–Ω–¥—Ä –î–µ–Ω–∏—Å—é–∫ - AI.Agents.PRO –∫—É—Ä—Å 2024-2025

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –í—Å—ñ —Ç–µ—Å—Ç–∏ –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω—ñ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ `results/`. –î–ª—è –≤–ª–∞—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π demo —Å–∫—Ä–∏–ø—Ç –∑ –≤–∞—à–∏–º–∏ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
